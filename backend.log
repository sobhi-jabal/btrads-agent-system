INFO:     Will watch for changes in these directories: ['/Users/sobhi/Desktop/Claude_Code/Duke/Evan/BTRADS_Agents/btrads-agent-system/backend']
INFO:     Uvicorn running on http://127.0.0.1:8001 (Press CTRL+C to quit)
INFO:     Started reloader process [71177] using WatchFiles
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [71185]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:httpx:HTTP Request: POST http://127.0.0.1:11434/api/chat "HTTP/1.1 200 OK"
INFO:     127.0.0.1:63674 - "POST /api/llm/extract HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [71185]
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [72824]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [72824]
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [72896]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [72896]
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [72939]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [72939]
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [72972]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [72972]
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [73045]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [73045]
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [73093]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [73093]
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [73163]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'ollama': True, 'postgres': False, 'vllm': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [73163]
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [94936]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [94936]
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [94997]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:     127.0.0.1:56648 - "GET /health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56665 - "GET / HTTP/1.1" 200 OK
INFO:     127.0.0.1:56799 - "GET /api/patients HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:56818 - "GET /api/patients HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:56837 - "GET /api/patients HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:56871 - "GET /docs HTTP/1.1" 200 OK
INFO:     127.0.0.1:56891 - "GET /patients HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57136 - "GET /api/patients HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:57154 - "GET /api/patients HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:57177 - "GET /api/patients/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/sobhi/Desktop/Claude_Code/Duke/Evan/BTRADS_Agents/btrads-agent-system/backend/api/routes/patients.py", line 50, in list_patients
    return await patient_service.list_patients(skip, limit, status)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/sobhi/Desktop/Claude_Code/Duke/Evan/BTRADS_Agents/btrads-agent-system/backend/services/patient_service.py", line 184, in list_patients
    async with get_async_db() as conn:
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 204, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/sobhi/Desktop/Claude_Code/Duke/Evan/BTRADS_Agents/btrads-agent-system/backend/utils/database.py", line 63, in get_async_db
    async with async_pool.acquire() as connection:
               ^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'acquire'
INFO:     127.0.0.1:57200 - "GET /api/patients/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/sobhi/Desktop/Claude_Code/Duke/Evan/BTRADS_Agents/btrads-agent-system/backend/api/routes/patients.py", line 50, in list_patients
    return await patient_service.list_patients(skip, limit, status)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/sobhi/Desktop/Claude_Code/Duke/Evan/BTRADS_Agents/btrads-agent-system/backend/services/patient_service.py", line 184, in list_patients
    async with get_async_db() as conn:
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 204, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/sobhi/Desktop/Claude_Code/Duke/Evan/BTRADS_Agents/btrads-agent-system/backend/utils/database.py", line 63, in get_async_db
    async with async_pool.acquire() as connection:
               ^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'acquire'
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [94997]
INFO:     Stopping reloader process [71177]
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/multiprocessing/resource_tracker.py:224: UserWarning: resource_tracker: There appear to be 1 leaked semaphore objects to clean up at shutdown
  warnings.warn('resource_tracker: There appear to be %d '
