INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__main__:Using LangGraphOrchestrator for orchestration
INFO:     Will watch for changes in these directories: ['/Users/sobhi/Desktop/Claude_Code/Duke/Evan/BTRADS_Agents/btrads-agent-system/backend']
INFO:     Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
INFO:     Started reloader process [60661] using WatchFiles
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [60710]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:     127.0.0.1:55071 - "GET / HTTP/1.1" 200 OK
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'utils/btrads_calculations.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [60710]
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'utils/btrads_calculations.py'. Reloading...
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [61384]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'agents/extraction/imaging_comparison_vllm.py'. Reloading...
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [61384]
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:watchfiles.main:6 changes detected
INFO:watchfiles.main:1 change detected
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [61449]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'agents/extraction/imaging_comparison_vllm.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [61449]
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [61486]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'agents/extraction/radiation_timeline_vllm.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [61486]
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [61538]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'agents/extraction/component_analysis_vllm.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [61538]
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [61604]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'agents/extraction/extent_analysis_vllm.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [61604]
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [61788]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:     127.0.0.1:55884 - "GET /api/agents HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55934 - "GET /docs HTTP/1.1" 200 OK
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'api/routes/vllm_extract.py'. Reloading...
INFO:httpx:HTTP Request: POST http://127.0.0.1:11434/api/chat "HTTP/1.1 200 OK"
INFO:     127.0.0.1:56658 - "POST /api/llm/extract HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [61788]
Python(64232) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:6 changes detected
WARNING:  WatchFiles detected changes in 'api/routes/vllm_extract.py', 'main.py'. Reloading...
Python(64233) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [64233]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:     127.0.0.1:57197 - "GET /api/vllm/status HTTP/1.1" 200 OK
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'api/routes/vllm_extract.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [64233]
Python(64465) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'api/routes/vllm_extract.py'. Reloading...
Python(64492) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'api/routes/vllm_extract.py'. Reloading...
Python(64531) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [64531]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:     127.0.0.1:57336 - "GET /api/vllm/status HTTP/1.1" 200 OK
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
ERROR:api.routes.vllm_extract:vLLM extraction error: VLLMBaseAgent.extract() missing 2 required positional arguments: 'context' and 'patient_id'
Traceback (most recent call last):
  File "/Users/sobhi/Desktop/Claude_Code/Duke/Evan/BTRADS_Agents/btrads-agent-system/backend/api/routes/vllm_extract.py", line 67, in extract_with_vllm
    result = await agent.extract(context)
                   ^^^^^^^^^^^^^^^^^^^^^^
TypeError: VLLMBaseAgent.extract() missing 2 required positional arguments: 'context' and 'patient_id'
INFO:     127.0.0.1:57375 - "POST /api/vllm/extract HTTP/1.1" 200 OK
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'api/routes/vllm_extract.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [64531]
Python(64704) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'api/routes/vllm_extract.py'. Reloading...
Python(64720) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [64720]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
ERROR:services.vllm_service:Failed to connect to vLLM server: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
ERROR:agents.base_vllm:medication-status error: Cannot connect to vLLM server at http://localhost:8000. Please ensure vLLM is running with: python -m vllm.entrypoints.openai.api_server --model meta-llama/Meta-Llama-3.1-70B-Instruct
ERROR:api.routes.vllm_extract:vLLM extraction error: 'AgentResult' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/sobhi/Desktop/Claude_Code/Duke/Evan/BTRADS_Agents/btrads-agent-system/backend/api/routes/vllm_extract.py", line 75, in extract_with_vllm
    "steroid_status": result.get("steroid_status", "unknown"),
                      ^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/pydantic/main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'AgentResult' object has no attribute 'get'
INFO:     127.0.0.1:57468 - "POST /api/vllm/extract HTTP/1.1" 200 OK
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'api/routes/vllm_extract.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [64720]
Python(64852) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [64852]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'api/routes/vllm_extract.py'. Reloading...
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:     Shutting down
ERROR:services.vllm_service:Failed to connect to vLLM server: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
ERROR:agents.base_vllm:medication-status error: Cannot connect to vLLM server at http://localhost:8000. Please ensure vLLM is running with: python -m vllm.entrypoints.openai.api_server --model meta-llama/Meta-Llama-3.1-70B-Instruct
INFO:     127.0.0.1:57630 - "POST /api/vllm/extract HTTP/1.1" 200 OK
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [64852]
Python(64935) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [64935]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [64935]
Python(64997) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [64997]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:httpx:HTTP Request: POST http://127.0.0.1:11434/api/chat "HTTP/1.1 200 OK"
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [64997]
Python(66543) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/multiprocessing/spawn.py", line 120, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/multiprocessing/spawn.py", line 129, in _main
    prepare(preparation_data)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/multiprocessing/spawn.py", line 240, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/multiprocessing/spawn.py", line 291, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
                   ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen runpy>", line 291, in run_path
  File "<frozen runpy>", line 98, in _run_module_code
  File "<frozen runpy>", line 88, in _run_code
  File "/Users/sobhi/Desktop/Claude_Code/Duke/Evan/BTRADS_Agents/btrads-agent-system/backend/main.py", line 12, in <module>
    from api.routes import patients, agents, validation, reports, llm, vllm_extract
  File "/Users/sobhi/Desktop/Claude_Code/Duke/Evan/BTRADS_Agents/btrads-agent-system/backend/api/routes/llm.py", line 13, in <module>
    ollama_service = OllamaExtractionService(model="phi4:14b")
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/sobhi/Desktop/Claude_Code/Duke/Evan/BTRADS_Agents/btrads-agent-system/backend/services/ollama_service.py", line 64, in __init__
    self.base_url = os.getenv("OLLAMA_BASE_URL", "http://localhost:11434")
                    ^^
NameError: name 'os' is not defined
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
Python(66580) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [66580]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [66580]
Python(66616) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [66616]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'api/routes/vllm_extract.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [66616]
Python(66751) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [66751]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [66751]
Python(68135) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
Python(68163) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [68163]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:httpx:HTTP Request: POST http://127.0.0.1:11434/api/chat "HTTP/1.1 200 OK"
INFO:     127.0.0.1:61014 - "POST /api/llm/extract HTTP/1.1" 200 OK
INFO:     127.0.0.1:61235 - "POST /api/patients/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 3292, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 1269, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 716, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/pool/impl.py", line 169, in _do_get
    with util.safe_reraise():
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/pool/impl.py", line 167, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 393, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 678, in __init__
    self.__connect()
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 902, in __connect
    with util.safe_reraise():
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 898, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/engine/create.py", line 637, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 616, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "postgres" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/sobhi/Desktop/Claude_Code/Duke/Evan/BTRADS_Agents/btrads-agent-system/backend/api/routes/patients.py", line 23, in create_patient
    return await patient_service.create_patient(patient_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/sobhi/Desktop/Claude_Code/Duke/Evan/BTRADS_Agents/btrads-agent-system/backend/services/patient_service.py", line 54, in create_patient
    db.commit()
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1969, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1256, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1231, in _prepare_impl
    self.session.flush()
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4312, in flush
    self._flush(objects)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4447, in _flush
    with util.safe_reraise():
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4408, in _flush
    flush_context.execute()
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 60, in save_obj
    for (
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 221, in _organize_states_for_save
    for state, dict_, mapper, connection in _connections_for_states(
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 1726, in _connections_for_states
    connection = uowtransaction.transaction.connection(base_mapper)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in connection
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 995, in connection
    return self._connection_for_bind(bind, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1129, in _connection_for_bind
    conn = self._parent._connection_for_bind(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 3268, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 147, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2430, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 3292, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 1269, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 716, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/pool/impl.py", line 169, in _do_get
    with util.safe_reraise():
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/pool/impl.py", line 167, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 393, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 678, in __init__
    self.__connect()
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 902, in __connect
    with util.safe_reraise():
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 898, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/engine/create.py", line 637, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 616, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "postgres" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
INFO:httpx:HTTP Request: POST http://127.0.0.1:11434/api/chat "HTTP/1.1 200 OK"
INFO:     127.0.0.1:62055 - "POST /api/llm/extract HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: POST http://127.0.0.1:11434/api/chat "HTTP/1.1 200 OK"
INFO:     127.0.0.1:62215 - "POST /api/llm/extract HTTP/1.1" 200 OK
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [68163]
Python(70356) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [70356]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [70356]
Python(70398) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [70398]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [70398]
Python(70433) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [70433]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [70433]
Python(70470) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [70470]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [70470]
Python(70502) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [70502]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [70502]
Python(70532) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [70532]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'api/routes/llm.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [70532]
Python(70605) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [70605]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'api/routes/llm.py'. Reloading...
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [70605]
Python(70622) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'api/routes/llm.py'. Reloading...
Python(70637) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [70637]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:httpx:HTTP Request: POST http://127.0.0.1:11434/api/chat "HTTP/1.1 200 OK"
INFO:     127.0.0.1:63485 - "POST /api/llm/extract HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: POST http://127.0.0.1:11434/api/chat "HTTP/1.1 200 OK"
INFO:     127.0.0.1:63521 - "POST /api/llm/extract HTTP/1.1" 200 OK
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [70637]
Python(71112) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
Python(71136) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [71136]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [71136]
Python(72825) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:5 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
Python(72868) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [72868]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [72868]
Python(72940) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [72940]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [72940]
Python(72975) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [72975]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [72975]
Python(73046) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:5 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
Python(73084) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:3 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [73084]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
WARNING:  WatchFiles detected changes in 'services/ollama_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:main:Shutting down...
INFO:     Application shutdown complete.
INFO:     Finished server process [73084]
Python(73164) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:watchfiles.main:5 changes detected
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/transformers/tokenization_utils_base.py:1601: FutureWarning: `clean_up_tokenization_spaces` was not set. It will be set to `True` by default. This behavior will be depracted in transformers v4.45, and will be then set to `False` by default. For more details check this issue: https://github.com/huggingface/transformers/issues/31884
  warnings.warn(
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:__mp_main__:Using LangGraphOrchestrator for orchestration
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:main:Using LangGraphOrchestrator for orchestration
INFO:     Started server process [73164]
INFO:     Waiting for application startup.
INFO:main:Starting BT-RADS Multi-Agent System...
INFO:utils.startup_checks:Running startup checks...
INFO:utils.startup_checks:==================================================
ERROR:utils.startup_checks:❌ Redis not available: Error 61 connecting to localhost:6379. 61.
ERROR:utils.startup_checks:❌ vLLM service not available: Cannot connect to host localhost:8000 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8000, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8000)]
INFO:utils.startup_checks:✅ Ollama service is available with 4 models
ERROR:utils.startup_checks:❌ PostgreSQL not available: role "postgres" does not exist
INFO:utils.startup_checks:Using Ollama mode (fallback)
INFO:utils.startup_checks:==================================================
INFO:utils.startup_checks:Startup Check Summary:
INFO:utils.startup_checks:  Agent Mode: ollama
INFO:utils.startup_checks:  Services: {'redis': False, 'vllm': False, 'ollama': True, 'postgres': False}
ERROR:utils.startup_checks:  Errors:
ERROR:utils.startup_checks:    - Cannot connect to Redis at redis://localhost:6379
ERROR:utils.startup_checks:    - Cannot connect to vLLM at http://localhost:8000
ERROR:utils.startup_checks:    - Cannot connect to database: role "postgres" does not exist
INFO:utils.startup_checks:==================================================
ERROR:main:Required services are not available. Please check configuration.
INFO:main:System starting in ollama mode
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized prior_assessment agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized imaging_comparison agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized medication_status agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized radiation_timeline agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized component_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized extent_analysis agent
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: all-MiniLM-L6-v2
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:agents.orchestration.langgraph_orchestrator:Initialized progression_pattern agent
INFO:     Application startup complete.
